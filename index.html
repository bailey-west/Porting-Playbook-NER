<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NER Porting & Data Transfer Guide</title>
  <style>
    :root {
      /* Light Mode Variables */
      --primary: #6138f5;
      --primary-hover: #4f2bcc;
      --bg-body: #f8fafc;
      --bg-card: #ffffff;
      --bg-input: #f1f5f9;
      --text-main: #0f172a;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --radius: 16px;
      --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        /* Dark Mode Variables */
        --bg-body: #0f172a;
        --bg-card: #1e293b;
        --bg-input: #334155;
        --text-main: #f8fafc;
        --text-muted: #94a3b8;
        --border: #334155;
      }
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: var(--bg-body);
      color: var(--text-main);
      font-family: var(--font-family);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 24px 16px;
    }

    /* --- Header & Typography --- */
    header {
      text-align: center;
      margin-bottom: 32px;
      padding-top: 20px;
    }

    h1 {
      margin: 0 0 12px 0;
      font-size: 2.5rem;
      font-weight: 800;
      letter-spacing: -0.025em;
      background: linear-gradient(135deg, var(--primary), #8f63ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    p.lead {
      margin: 0 auto;
      color: var(--text-muted);
      font-size: 1.1rem;
      max-width: 600px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      margin-top: 16px;
      padding: 6px 12px;
      background: rgba(97, 56, 245, 0.1);
      color: var(--primary);
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    /* --- Toolbar & Search --- */
    .toolbar {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 32px;
      position: sticky;
      top: 10px;
      z-index: 10;
      background: rgba(var(--bg-body), 0.8); /* blurry background behind sticky header */
      backdrop-filter: blur(8px);
      padding: 10px 0;
    }

    .search-group {
      display: flex;
      gap: 8px;
      background: var(--bg-card);
      padding: 6px;
      border-radius: 14px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
    }

    .search-group input {
      flex: 1;
      border: none;
      background: transparent;
      padding: 10px 12px;
      font-size: 1rem;
      color: var(--text-main);
      outline: none;
    }

    .search-group button.icon-btn {
      background: transparent;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      padding: 0 12px;
      font-weight: 600;
      transition: color 0.2s;
    }
    .search-group button.icon-btn:hover { color: var(--primary); }

    .search-group button.action-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }
    .search-group button.action-btn:hover { background: var(--primary-hover); }

    .actions-row {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .filter-btn {
      background: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-muted);
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .filter-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: rgba(97, 56, 245, 0.05);
    }

    /* --- Cards --- */
    section.card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin-bottom: 16px;
      overflow: hidden;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    /* Summary Styling (The clickable header) */
    summary {
      list-style: none;
      padding: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-weight: 700;
      font-size: 1.1rem;
      user-select: none;
    }
    summary::-webkit-details-marker { display: none; }
    
    summary h3 { margin: 0; display: inline-block; color: var(--text-main); }
    
    /* The Chevron Animation */
    summary::after {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      transition: transform 0.3s ease;
      height: 24px;
      opacity: 0.7;
    }
    details[open] summary::after { transform: rotate(180deg); }

    /* Open State */
    details[open] summary {
      border-bottom: 1px solid var(--border);
      background: rgba(97, 56, 245, 0.03);
    }

    /* Card Content */
    .card-content {
      padding: 18px;
      animation: fadeIn 0.3s ease;
    }

    /* Grid for Data */
    .meta-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
      margin-bottom: 16px;
    }

    .meta-box {
      background: var(--bg-input);
      padding: 12px 16px;
      border-radius: 12px;
      border: 1px solid transparent;
    }
    .meta-box:hover { border-color: var(--border); }

    .meta-box h4 {
      margin: 0 0 4px 0;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
    }
    .meta-box p {
      margin: 0;
      font-weight: 600;
      color: var(--text-main);
      font-size: 0.95rem;
      word-break: break-word;
    }

    /* Elaborate Button */
    .elaborate-btn {
      width: 100%;
      background: transparent;
      border: 2px dashed var(--border);
      color: var(--primary);
      padding: 10px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s;
      margin-top: 12px;
    }
    .elaborate-btn:hover {
      background: rgba(97, 56, 245, 0.05);
      border-color: var(--primary);
    }

    /* Links */
    .link-badge {
      font-size: 0.8rem;
      text-decoration: none;
      color: var(--primary);
      background: rgba(97, 56, 245, 0.1);
      padding: 4px 10px;
      border-radius: 6px;
      margin-left: 10px;
      vertical-align: middle;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    .link-badge:hover { background: rgba(97, 56, 245, 0.2); }

    /* AI Result Area */
    .ai-result {
      background: var(--bg-input);
      border: 1px solid var(--primary);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      display: none;
    }
    .ai-result h4 { color: var(--primary); margin-top: 0; }
    .ai-result ul { padding-left: 20px; }
    .ai-result li { margin-bottom: 6px; }

    /* Highlight */
    mark {
      background: rgba(253, 224, 71, 0.4);
      color: inherit;
      padding: 0 2px;
      border-radius: 2px;
    }

    /* Toast Notification */
    #toast {
      visibility: hidden;
      min-width: 250px;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 8px;
      padding: 12px;
      position: fixed;
      z-index: 99;
      left: 50%;
      bottom: 30px;
      transform: translateX(-50%);
      font-size: 0.9rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    #toast.show {
      visibility: visible;
      animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }

    @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
    @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
    @keyframes fadeIn { from {opacity: 0; transform: translateY(-5px);} to {opacity: 1; transform: translateY(0);} }

    /* Focus States */
    :focus-visible { outline: 2px solid var(--primary); outline-offset: 2px; }

    /* Mobile Tweaks */
    @media (max-width: 600px) {
      h1 { font-size: 2rem; }
      summary { font-size: 1rem; }
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <h1>NER Porting Guide</h1>
      <p class="lead">Carrier lookup, pin/account guidance, and transfer tips.</p>
      <div class="badge">Built by Bailey West</div>
    </header>

    <div class="toolbar">
      <div class="search-group">
        <input id="aiSearchInput" type="search" placeholder="AI Search (e.g., 'Google Fi porting')..." aria-label="AI Search" />
        <button id="aiSearchBtn" class="action-btn">AI Search</button>
      </div>
      
      <div class="search-group">
        <input id="filterInput" type="search" placeholder="Filter list (e.g., 'Verizon')..." aria-label="Filter listed carriers" />
        <button id="clearBtn" class="icon-btn">Clear</button>
      </div>

      <div class="actions-row">
        <button id="expandAll" class="filter-btn">Expand All</button>
        <button id="collapseAll" class="filter-btn">Collapse All</button>
        <button id="sortAZ" class="filter-btn">Sort A-Z</button>
      </div>
    </div>

    <div id="aiResult" class="ai-result"></div>

    <main id="content">
        
        <section id="ai-disclaimer" class="card" style="background: rgba(97, 56, 245, 0.05); border-color: rgba(97, 56, 245, 0.2);">
            <div style="padding: 16px;">
                <h3 style="margin: 0 0 8px; color: var(--primary); font-size: 1rem;">Important Disclaimer</h3>
                <p style="margin: 0; font-size: 0.85rem; color: var(--text-muted);">Information provided is for reference. Carrier policies change. Always verify with official support.</p>
            </div>
        </section>

        <section id="verizon" class="card carrier-card">
          <details>
            <summary>
              <div>
                <h3>Verizon</h3>
                <a href="https://www.verizon.com/" target="_blank" class="link-badge">Website</a>
              </div>
            </summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Find your 10-digit number on your bill or in the My Verizon app. Omit suffixes like '-00001'.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Dial #PORT (#7678) from the phone. The 6-digit PIN is valid for 7 days.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips & Unlock</h4><p>Devices unlock 60 days after purchase. Porting a financed device makes the balance due. Support: 1-800-922-0204.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Verizon')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="verizon-prepaid" class="card carrier-card">
          <details>
            <summary>
              <div><h3>Verizon Prepaid</h3></div>
            </summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Find in your online account under "Account Details" or on your bill.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Dial #PORT (#7678) from the phone. The 6-digit PIN is valid for 7 days.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Notes</h4><p>Prepaid support: 1-800-922-0204.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Verizon Prepaid')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="verizon-business" class="card carrier-card">
          <details>
            <summary><div><h3>Verizon Business</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Find in the "My Business Wireless" online portal under "Line Overview".</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Typically the account's 4-digit security code. #PORT method does not work.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Notes</h4><p>Contact your company's IT admin or Verizon Business support.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Verizon Business')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="att" class="card carrier-card">
          <details>
            <summary>
              <div><h3>AT&T</h3> <a href="https://www.att.com/" target="_blank" class="link-badge">Website</a></div>
            </summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Your 12-digit number is on your bill or online. Support will not provide it over the phone.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Dial *PORT (*7678) or generate online. Expires in 4 days.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips</h4><p>Device must be active 60 days & paid off to unlock. Request at att.com/deviceunlock.</p></div>
              <button class="elaborate-btn" onclick="elaborate('AT&T')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="att-prepaid" class="card carrier-card">
          <details>
            <summary><div><h3>AT&T Prepaid</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Call support at (800) 901-9878 to get your account number.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>This is your 4-digit account security PIN. Reset at paygonline.com if forgotten.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips</h4><p>Devices must be paid in full to unlock. Contact support to request.</p></div>
              <button class="elaborate-btn" onclick="elaborate('AT&T Prepaid')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="t-mobile" class="card carrier-card">
          <details>
            <summary>
              <div><h3>T-Mobile</h3> <a href="https://www.t-mobile.com/" target="_blank" class="link-badge">Website</a></div>
            </summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Find your 9-digit account number on your bill or in your T-Mobile profile.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Generate a temporary PIN in account settings. Valid for 7 days.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips</h4><p>Device must be active for 40 days and fully paid off to be unlocked.</p></div>
              <button class="elaborate-btn" onclick="elaborate('T-Mobile')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="t-mobile-prepaid" class="card carrier-card">
          <details>
            <summary><div><h3>T-Mobile Prepaid</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Your 11-digit phone number (e.g., 1XXXXXXXXXX).</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Your existing account security PIN. Call 611 to set one up if needed.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips</h4><p>Porting department: 1-877-789-3106.</p></div>
              <button class="elaborate-btn" onclick="elaborate('T-Mobile Prepaid')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="tracfone" class="card carrier-card">
          <details>
            <summary><div><h3>Tracfone</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Device IMEI. For BYOD, last 15 digits of SIM. Text 'FOUR' to 611611.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Text 'NTP' to 611611 from the device.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips</h4><p>Port may fail if ZIP is wrong (try 33178 for Miami, FL). Unlock support: 888-442-5102.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Tracfone')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="straight-talk" class="card carrier-card">
          <details>
            <summary><div><h3>Straight Talk</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Device IMEI. For BYOD, last 15 digits of SIM. Text 'FOUR' to 611611.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Text 'NTP' to 611611 from the device.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips</h4><p>Unlock support: 888-442-5102. Ensure the ZIP code on file is accurate.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Straight Talk')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="google-voice" class="card carrier-card">
          <details>
            <summary><div><h3>Google Voice</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Your 10-digit Google Voice phone number.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Voicemail PIN. You must pay a $3 fee to unlock the number for porting.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Notes</h4><p>Porting can take up to 5 business days.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Google Voice')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="google-fi" class="card carrier-card">
          <details>
            <summary><div><h3>Google Fi</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Generated via the "Leave Google Fi" process on fi.google.com.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Generated along with the account number during the "Leave Fi" process.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Notes</h4><p>Google Fi phones are unlocked by default. Ports are usually very fast.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Google Fi')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="cricket" class="card carrier-card">
          <details>
            <summary><div><h3>Cricket</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Find in myCricket app, website, or call (800) 274-2538.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Dial *PORT (*7678) or get in app. Valid for 5 days.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips</h4><p>Devices must be active on Cricket for 6 months to be unlocked.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Cricket')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="mint-mobile" class="card carrier-card">
          <details>
            <summary><div><h3>Mint Mobile</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Request from agent via live chat on mintmobile.com.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>The agent will provide your PIN during the live chat.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips</h4><p>Payment plan devices locked for 12 months. Outright phones unlock after 60 days.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Mint Mobile')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="boost-mobile" class="card carrier-card">
          <details>
            <summary><div><h3>Boost Mobile</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Call support at 1-888-266-7848 to get your 9-digit account number.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>This is the 4-digit security PIN you set up when the account was created.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Notes</h4><p>You may need to speak to a support agent to get correct info.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Boost Mobile')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="consumer-cellular" class="card carrier-card">
          <details>
            <summary><div><h3>Consumer Cellular</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Find 9-digit number in online profile or call (888) 750-5519.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Available in online account or by calling support.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Tips</h4><p>Often requires last 4 of SSN. May need Tier 2 support for port holds.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Consumer Cellular')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="visible" class="card carrier-card">
          <details>
            <summary><div><h3>Visible</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Visible app > "Profile" > "Port-Out PIN".</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Request in app. Sent via email/text, valid for 7 days.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Notes</h4><p>The port-out PIN is time-sensitive; use the most recent one.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Visible')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="metro" class="card carrier-card">
          <details>
            <summary><div><h3>Metro by T-Mobile</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>9-digit number in online account or billing statements.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Request in "My Account" > "Profile". Sent via text, valid for 7 days.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Notes</h4><p>8-digit security PIN (often birthdate) may be needed.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Metro by T-Mobile')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="us-cellular" class="card carrier-card">
          <details>
            <summary><div><h3>US Cellular</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Displayed in the top-left corner of your online account page.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Account security PIN (often last 4 of phone number).</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Notes</h4><p>Customer service: 1-888-944-9400.</p></div>
              <button class="elaborate-btn" onclick="elaborate('US Cellular')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="spectrum-mobile" class="card carrier-card">
          <details>
            <summary><div><h3>Spectrum Mobile</h3></div></summary>
            <div class="card-content">
              <div class="meta-grid">
                <div class="meta-box"><h4>Account Number</h4><p>Listed on billing statement or online account.</p></div>
                <div class="meta-box"><h4>Transfer PIN</h4><p>Call Spectrum support at 833-224-6603 to request PIN.</p></div>
              </div>
              <div class="meta-box" style="margin-top: 10px;"><h4>Notes</h4><p>Contact Spectrum support for any specific porting details.</p></div>
              <button class="elaborate-btn" onclick="elaborate('Spectrum Mobile')">✨ Elaborate with AI</button>
            </div>
          </details>
        </section>

        <section id="data-transfer" class="card">
          <details>
            <summary><div><h3>Data Transfer Guide</h3></div></summary>
            <div class="card-content">
               <div style="display: flex; flex-direction: column; gap: 12px;">
                 <details style="background: var(--bg-input); padding: 10px; border-radius: 8px;">
                   <summary style="padding: 5px; font-size: 0.95rem;">Android to Android</summary>
                   <p style="margin: 10px 0 0; font-size: 0.9rem; color: var(--text-muted);">Use Google's built-in transfer utility or Samsung Smart Switch. Cable is fastest; WiFi is easiest.</p>
                 </details>
                 <details style="background: var(--bg-input); padding: 10px; border-radius: 8px;">
                   <summary style="padding: 5px; font-size: 0.95rem;">Android to iPhone</summary>
                   <p style="margin: 10px 0 0; font-size: 0.9rem; color: var(--text-muted);">Use the "Move to iOS" app on Android. Must be done during initial iPhone setup (or factory reset).</p>
                 </details>
                 <details style="background: var(--bg-input); padding: 10px; border-radius: 8px;">
                   <summary style="padding: 5px; font-size: 0.95rem;">iPhone to iPhone</summary>
                   <p style="margin: 10px 0 0; font-size: 0.9rem; color: var(--text-muted);">Use "Quick Start" by placing phones near each other. If update required, skip transfer, update, reset, then transfer.</p>
                 </details>
               </div>
            </div>
          </details>
        </section>

        <section id="tech-support" class="card">
            <div style="padding: 18px;">
                <h3 style="margin-top: 0; color: var(--primary);">AI Tech Support</h3>
                <p style="color: var(--text-muted); font-size: 0.9rem;">Ask a troubleshooting question below:</p>
                <div class="search-group" style="margin-top: 12px;">
                    <input id="techSupportInput" type="search" placeholder="e.g., 'Why is port rejected?'" />
                    <button id="techSupportBtn" class="action-btn">Ask</button>
                </div>
                <div id="techSupportResult" class="ai-result" style="margin-top: 12px;"></div>
            </div>
        </section>

    </main>
  </div>
  
  <div id="toast">Notification</div>

  <script>
    const AI_PROXY_URL = '/.netlify/functions/ai-proxy';
    
    // Elements
    const content = document.getElementById('content');
    const filterInput = document.getElementById('filterInput');
    const aiSearchInput = document.getElementById('aiSearchInput');
    const aiResultDiv = document.getElementById('aiResult');
    const techSupportInput = document.getElementById('techSupportInput');
    const techSupportResultDiv = document.getElementById('techSupportResult');
    const toast = document.getElementById('toast');
    
    // Store original order for resetting sort
    const carrierSections = Array.from(document.querySelectorAll('.carrier-card'));
    const bottomSections = Array.from(document.querySelectorAll('#data-transfer, #tech-support'));
    const disclaimer = document.getElementById('ai-disclaimer');
    let isSorted = false;
    let isFetching = false;

    // Toast Function
    function showToast(message) {
      toast.textContent = message;
      toast.className = "show";
      setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
    }

    // Highlighting Logic
    function highlightText(node, term) {
      if(!term) return;
      const re = new RegExp(term.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'), 'ig');
      
      // Cleanup previous marks
      node.querySelectorAll('mark').forEach(m => m.replaceWith(m.textContent));
      
      const walker = document.createTreeWalker(node, NodeFilter.SHOW_TEXT, null, false);
      const nodesToReplace = [];
      
      while(walker.nextNode()) {
        const textNode = walker.currentNode;
        if(textNode.parentElement.tagName !== 'MARK' && textNode.textContent.match(re)) {
          nodesToReplace.push(textNode);
        }
      }

      nodesToReplace.forEach(textNode => {
        const span = document.createElement('span');
        span.innerHTML = textNode.textContent.replace(re, m => `<mark>${m}</mark>`);
        textNode.replaceWith(span);
      });
    }

    // Filter Logic
    function runFilter() {
      const q = filterInput.value.trim().toLowerCase();
      let hasResults = false;

      // Filter Carriers
      carrierSections.forEach(s => {
        const text = s.innerText.toLowerCase();
        const match = q === '' || text.includes(q);
        s.style.display = match ? 'block' : 'none';
        if(match) hasResults = true;
        
        // Clear marks first
        s.querySelectorAll('mark').forEach(m => m.replaceWith(m.textContent));
        if(q) highlightText(s, q);
      });

      // Filter Bottom Sections (keep visible unless query specifically excludes them contextually, 
      // generally we just leave them or filter them same way)
      bottomSections.forEach(s => {
        const text = s.innerText.toLowerCase();
        const match = q === '' || text.includes(q);
        s.style.display = match ? 'block' : 'none';
        if(match) hasResults = true;
      });
    }

    // AI Logic
    async function runAISearch(prompt, resultDiv) {
      if (isFetching) return;
      isFetching = true;
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = `<div style="text-align:center; color: var(--primary);">Processing...</div>`;

      try {
        const response = await fetch(AI_PROXY_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ contents: [{ role: "user", parts: [{ text: prompt }] }] })
        });

        if (!response.ok) throw new Error('API Error');

        const result = await response.json();
        let text = result?.candidates?.[0]?.content?.parts?.[0]?.text || "No info found.";

        // Format
        text = text.replace(/\*\*(.*?):\*\*/g, '<strong>$1</strong>');
        text = text.replace(/^\s*[-*]\s+(.*)$/gm, '<li>$1</li>');
        text = text.replace(/<\/li>\s*<li>/g, '</li><li>');
        if(text.includes('<li>')) text = `<ul>${text}</ul>`;

        resultDiv.innerHTML = `<h4>AI Result</h4><div>${text}</div>`;
      } catch (error) {
        resultDiv.innerHTML = `<p style="color:red">Error connecting to AI.</p>`;
      } finally {
        isFetching = false;
      }
    }

    // Elaborate Button
    window.elaborate = function(carrier) {
      const prompt = `Generate a scannable porting guide for "${carrier}" to Xfinity Mobile. 
      Format: 
      **Account Number:** [Instructions]
      **Transfer PIN:** [Instructions & Expiration]
      **Tips:** [2-3 common issues]
      **Support Number:** [Phone]`;
      
      runAISearch(prompt, aiResultDiv);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    };

    // Event Listeners
    filterInput.addEventListener('input', runFilter);
    
    document.getElementById('clearBtn').addEventListener('click', () => {
      filterInput.value = '';
      runFilter();
    });

    document.getElementById('aiSearchBtn').addEventListener('click', () => {
      const q = aiSearchInput.value.trim();
      if(q) {
        const prompt = `Generate a porting guide for "${q}" to Xfinity Mobile. Include Account # location, PIN process, and Support Number.`;
        runAISearch(prompt, aiResultDiv);
      }
    });

    document.getElementById('techSupportBtn').addEventListener('click', () => {
      const q = techSupportInput.value.trim();
      if(q) {
        runAISearch(`Troubleshooting steps for: ${q}`, techSupportResultDiv);
      }
    });

    document.getElementById('expandAll').addEventListener('click', () => {
      document.querySelectorAll('details').forEach(d => d.open = true);
      showToast('All sections expanded');
    });

    document.getElementById('collapseAll').addEventListener('click', () => {
      document.querySelectorAll('details').forEach(d => d.open = false);
      showToast('All sections collapsed');
    });

    document.getElementById('sortAZ').addEventListener('click', () => {
      // Remove all carriers from DOM temporarily
      carrierSections.forEach(s => s.remove());
      
      if(!isSorted) {
        // Sort based on H3 text
        const sorted = [...carrierSections].sort((a, b) => {
          const ta = a.querySelector('h3').innerText.toUpperCase();
          const tb = b.querySelector('h3').innerText.toUpperCase();
          return ta.localeCompare(tb);
        });
        // Append sorted
        sorted.forEach(s => content.insertBefore(s, bottomSections[0] || null));
        isSorted = true;
        showToast('Sorted A-Z');
      } else {
        // Revert to original order
        carrierSections.forEach(s => content.insertBefore(s, bottomSections[0] || null));
        isSorted = false;
        showToast('Restored Default Order');
      }
    });
  </script>
</body>
</html>
