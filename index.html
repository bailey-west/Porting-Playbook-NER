<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NER Porting & Data Transfer Guide</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --accent:#6138f5; /* Xfinity Purple */
      --bg:#ffffff;
      --muted:#6b7280;
      --card:#f7f7fb;
      --max-width:1100px;
      --radius:12px;
      --gap:16px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:#0f172a;line-height:1.45}
    .container{max-width:var(--max-width);margin:20px auto;padding:18px}
    header{
      display:flex;
      flex-direction: column;
      gap: 16px;
      align-items:center;
      margin-bottom:18px;
      max-width: 800px;
      margin: 20px auto 18px auto;
      text-align: center;
    }
    .brand{display:flex;flex-direction:column; align-items: center;}
    h1{margin:0;font-size:3.25rem; color: var(--accent); font-weight: 800;}
    p.lead{margin:6px 0 0;color:var(--muted);font-size:0.95rem}
    .badge-container{
        display:flex;
        gap:10px;
        align-items:center;
        margin-top: 10px;
    }
    
    .toolbar{
      display:flex;
      flex-direction: column;
      gap: 12px;
      align-items:center;
      margin:12px auto;
      max-width: 600px;
    }
    .search-container{
      width:100%;
      display:flex;
      align-items:center;
      background:var(--card);
      padding:8px;
      border-radius:999px;
      gap:8px;
      border: 1px solid var(--accent);
    }
    .search-container input{border:0;background:transparent;outline:none;font-size:1rem;width:100%}
    .actions{display:flex;gap:8px; justify-content: center; width: 100%;}
    .actions .copy-btn {
        width: 50%;
    }

    main{
      display:flex;
      gap:18px;
      margin-top:18px;
      justify-content: center;
    }
    .content{flex:1; max-width: 800px;}

    section.card{background:#fff;border:1px solid #eee;padding:14px;border-radius:12px;margin-bottom:12px}
    .card h3{margin:0 0 8px;font-size:1.05rem;color:var(--accent)}
    .meta-grid{
        display:grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap:10px;
    }
    .meta{background:var(--card);padding:10px;border-radius:10px}
    .meta h4{margin:0 0 6px;font-size:0.85rem;color:var(--muted)}
    .meta p{margin:0;font-weight:600}
    .tips{margin-top:10px}
    .tips h4{margin:0 0 6px;font-size:0.9rem}
    .badge{display:inline-block;padding:6px 8px;border-radius:8px;background:linear-gradient(90deg,var(--accent),#8f63ff);color:white;font-size:0.8rem}
    
    .card summary {
      background: linear-gradient(180deg,#fff,#fbfbff);
      padding: 12px;
      border-radius: 10px;
      cursor: pointer;
      border: 1px solid #eee;
      display: flex;
      align-items: center;
      justify-content: space-between;
      list-style: none;
      -webkit-user-select: none;
      user-select: none;
    }
    .card summary::-webkit-details-marker {
        display: none;
    }
    .card details[open] summary {
      box-shadow: 0 6px 18px rgba(17,24,39,0.04);
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      margin-bottom: -1px;
    }
    .card details > div {
      border: 1px solid #eee;
      border-top: 0;
      border-bottom-left-radius: 10px;
      border-bottom-right-radius: 10px;
      padding: 12px;
    }
    .card h3 {
      margin: 0;
    }
    
    @media (max-width:900px){
      main{flex-direction:column}
      .sidebar{width:100%}
    }

    a:focus, button:focus, input:focus, summary:focus{outline:3px solid rgba(97,56,245,0.12);outline-offset:2px}

    .search-empty{color:var(--muted);padding:12px;text-align:center}

    mark{background:var(--accent);color:white;padding:0 4px;border-radius:3px}

    .small{font-size:0.9rem;color:var(--muted)}
    
    .copy-btn, .link-btn{
      background:transparent;
      border:1px dashed #e7e5ff;
      color:var(--accent);
      padding:6px 10px;
      border-radius:10px;
      font-weight:600;
      cursor: pointer;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    .link-btn {
      font-size: 0.8rem;
      border: 1px dashed #e7e5ff;
      padding: 6px 10px;
    }
    .card .link-btn {
        border: 1px solid #e7e5ff;
        background: #fbfbff;
    }

    .ai-result {
      background: #f7f7fb;
      border: 1px solid #eee;
      border-radius: 12px;
      padding: 1rem;
      margin-top: 1rem;
      position: relative;
    }
    .ai-result h4 {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: var(--accent);
    }
    .ai-result .loading {
      text-align: center;
      color: #6138f5;
    }
    .ai-result pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-family: inherit;
    }

    .ai-result-content h4 {
        font-size: 1rem;
        font-weight: 700;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
        color: var(--accent);
    }

    .ai-result-content ul {
        list-style: disc;
        padding-left: 20px;
    }
    .ai-result-content li {
        margin-bottom: 0.25rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <h1>NER Porting &amp; Data Transfer Guide</h1>
        <p class="lead">Quick carrier lookup, pin/account guidance, and device/data transfer tips â€” mobile-first and searchable.</p>
      </div>
      <div class="badge-container">
        <span class="badge">Built by Bailey West</span>
      </div>
    </header>

    <div class="toolbar">
      <div class="search-container">
        <input id="aiSearchInput" type="search" placeholder="AI Search for unlisted carriers..." aria-label="AI Search for carriers" />
        <button id="aiSearchBtn" class="copy-btn">Search</button>
        <button id="clearAiBtn" title="Clear AI Search" style="background:transparent;border:0;color:var(--muted);font-weight:600;cursor:pointer">Clear</button>
      </div>
      <div class="search-container">
        <input id="filterInput" type="search" placeholder="Filter listed carriers..." aria-label="Filter listed carriers" />
        <button id="clearBtn" title="Clear" style="background:transparent;border:0;color:var(--muted);font-weight:600;cursor:pointer">Clear</button>
      </div>
      <div class="actions">
        <button id="expandAll" class="copy-btn">Expand All</button>
        <button id="collapseAll" class="copy-btn">Collapse All</button>
        <button id="sortAZ" class="copy-btn">Sort A-Z</button>
      </div>
      <p class="small text-center mt-4 font-bold">Use the "Elaborate on this" button often for more detailed troubleshooting info!</p>
    </div>
    
    <div class="ai-result" id="aiResult" style="display: none;"></div>

    <main>
      <div class="content" id="content">

        <section id="ai-disclaimer" class="card">
            <h3>Important Disclaimer</h3>
            <p class="small">The information provided on this page and by the AI tools is for reference purposes only. Carrier policies, porting requirements, and data transfer methods can change without notice. Always verify information with the carrier's official support channels for the most accurate and up-to-date details. AI-generated responses are not a substitute for official technical support.</p>
        </section>

        <!-- All carrier sections with updated content and links -->
        <section id="verizon" class="card">
          <details>
            <summary>
              <h3>Verizon</h3>
              <a href="https://www.verizon.com/support/port-out-faqs/" target="_blank" class="link-btn" title="View Verizon Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>10-digit number from bill or app. Omit suffixes like '-00001'.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Dial #PORT (#7678) from device. 6-digit PIN valid for 7 days.</p></div>
                <div class="meta"><h4>SPID</h4><p>6666</p></div>
              </div>
              <div class="tips">
                <h4>Tips &amp; Unlock</h4>
                <p class="small">Devices unlock after 60 days. Porting financed device makes balance due. Support: 1-800-922-0204.</p>
              </div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Verizon')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="verizon-prepaid" class="card">
          <details>
            <summary>
              <h3>Verizon Prepaid</h3>
              <a href="https://www.verizon.com/support/prepaid-port-out-faqs/" target="_blank" class="link-btn" title="View Verizon Prepaid Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Find in online account under "Account Details" or on bill.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Dial #PORT (#7678) from device. 6-digit PIN valid for 7 days.</p></div>
                <div class="meta"><h4>SPID</h4><p>6666</p></div>
              </div>
              <div class="tips"><h4>Notes</h4><p class="small">Prepaid support: 1-800-922-0204.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Verizon Prepaid')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="verizon-business" class="card">
          <details>
            <summary>
              <h3>Verizon Business</h3>
              <a href="https://www.verizon.com/support/port-out-faqs/" target="_blank" class="link-btn" title="View Verizon Business Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Find in "My Business Wireless" online portal under "Line Overview".</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Typically the account's 4-digit security code. #PORT does not work.</p></div>
                <div class="meta"><h4>SPID</h4><p>6666</p></div>
              </div>
              <div class="tips"><h4>Notes</h4><p class="small">Contact company IT or Verizon Business support for help.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Verizon Business')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="att" class="card">
          <details>
            <summary>
              <h3>AT&amp;T</h3>
              <a href="https://www.att.com/support/article/wireless/KM1020436/" target="_blank" class="link-btn" title="View AT&T Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>12-digit number from bill, website, or app. Not given over phone.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Dial *PORT (*7678) or generate in app/website. Expires in 4 days.</p></div>
                 <div class="meta"><h4>SPID</h4><p>5555</p></div>
              </div>
              <div class="tips"><h4>Tips</h4><p class="small">Device must be active 60 days & paid off to unlock. Request at att.com/deviceunlock.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('AT&T')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="att-prepaid" class="card">
          <details>
            <summary>
              <h3>AT&amp;T Prepaid</h3>
              <a href="https://www.att.com/support/article/wireless/KM1020436/" target="_blank" class="link-btn" title="View AT&T Prepaid Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Must call support at (800) 901-9878 to obtain.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>The 4-digit account security PIN. Reset at paygonline.com if forgotten.</p></div>
                <div class="meta"><h4>SPID</h4><p>5555</p></div>
              </div>
              <div class="tips"><h4>Tips</h4><p class="small">Devices must be paid in full to be unlocked. Contact support to request.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('AT&T Prepaid')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="t-mobile" class="card">
          <details>
            <summary>
              <h3>T-Mobile</h3>
              <a href="https://www.t-mobile.com/support/account/transfer-your-number-pin-from-t-mobile" target="_blank" class="link-btn" title="View T-Mobile Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>9-digit number from your bill or T-Mobile app/website.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Generate temporary PIN in account profile settings. Valid for 7 days.</p></div>
                <div class="meta"><h4>SPID</h4><p>7777</p></div>
              </div>
              <div class="tips"><h4>Tips</h4><p class="small">Device must be active for 40 days and fully paid off to be unlocked.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('T-Mobile')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="t-mobile-prepaid" class="card">
          <details>
            <summary>
              <h3>T-Mobile Prepaid</h3>
              <a href="https://www.t-mobile.com/support/account/transfer-your-number-pin-from-t-mobile" target="_blank" class="link-btn" title="View T-Mobile Prepaid Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>11-digit phone number (1XXXXXXXXXX).</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Existing account security PIN. Call 611 to set up if needed.</p></div>
                <div class="meta"><h4>SPID</h4><p>7777</p></div>
              </div>
              <div class="tips"><h4>Tips</h4><p class="small">Porting dept: 1-877-789-3106.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('T-Mobile Prepaid')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="tracfone" class="card">
          <details>
            <summary>
              <h3>Tracfone</h3>
              <a href="https://www.tracfone.com/support/port-out" target="_blank" class="link-btn" title="View Tracfone Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Device's IMEI or last 15 digits of SIM ICCID. Text "FOUR" to 611611.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Text "NTP" to 611611 from the device.</p></div>
                <div class="meta"><h4>SPID</h4><p>6666 (Verizon-based)</p></div>
              </div>
              <div class="tips"><h4>Tips</h4><p class="small">Port may fail if ZIP is wrong (try 33178 for Miami, FL). Unlock support: 888-442-5102.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Tracfone')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="straight-talk" class="card">
          <details>
            <summary>
              <h3>Straight Talk</h3>
              <a href="https://www.straighttalk.com/support/port-out" target="_blank" class="link-btn" title="View Straight Talk Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>IMEI of device or last 15 digits of SIM ICCID. Text "FOUR" to 611611.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Text "NTP" to 611611 from the device.</p></div>
                <div class="meta"><h4>SPID</h4><p>6666 (Verizon-based)</p></div>
              </div>
              <div class="tips"><h4>Tips</h4><p class="small">Unlock support: 888-442-5102. Ensure ZIP code on file is accurate.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Straight Talk')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="google-voice" class="card">
          <details>
            <summary>
              <h3>Google Voice</h3>
              <a href="https://support.google.com/voice/answer/1065667?hl=en" target="_blank" class="link-btn" title="View Google Voice Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>The 10-digit Google Voice phone number.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>The account's voicemail PIN. Must pay a $3 fee to unlock number.</p></div>
                <div class="meta"><h4>SPID</h4><p>7927 (Inteliquent)</p></div>
              </div>
              <div class="tips"><h4>Notes</h4><p class="small">Porting can take up to 5 business days but usually validates quickly.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Google Voice')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="google-fi" class="card">
          <details>
            <summary>
              <h3>Google Fi</h3>
              <a href="https://support.google.com/fi/answer/6246240?hl=en" target="_blank" class="link-btn" title="View Google Fi Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Generated via "Leave Google Fi" process on fi.google.com.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Generated along with account number during "Leave Fi" process.</p></div>
                <div class="meta"><h4>SPID</h4><p>7777 (T-Mobile) / 6528 (US Cellular)</p></div>
              </div>
              <div class="tips"><h4>Notes</h4><p class="small">Google Fi phones are unlocked by default. Ports are usually very fast.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Google Fi')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="cricket" class="card">
          <details>
            <summary>
              <h3>Cricket</h3>
              <a href="https://www.cricketwireless.com/support/account/transfer-a-number.html" target="_blank" class="link-btn" title="View Cricket Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Find in myCricket app, website, or call (800) 274-2538.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Dial *PORT (*7678) or get in app. Valid for 5 days.</p></div>
                <div class="meta"><h4>SPID</h4><p>5555</p></div>
              </div>
              <div class="tips"><h4>Tips</h4><p class="small">Devices must be active on network for 6 months to be unlocked.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Cricket')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="mint-mobile" class="card">
          <details>
            <summary>
              <h3>Mint Mobile</h3>
              <a href="https://www.mintmobile.com/help/port-out-information/" target="_blank" class="link-btn" title="View Mint Mobile Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Request from agent via live chat on mintmobile.com.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Provided by agent during live chat session.</p></div>
                <div class="meta"><h4>SPID</h4><p>7777</p></div>
              </div>
              <div class="tips"><h4>Tips</h4><p class="small">Devices on payment plan locked for 12 months. Outright phones unlocked after 60 days.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Mint Mobile')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="boost-mobile" class="card">
          <details>
            <summary>
              <h3>Boost Mobile</h3>
              <a href="https://www.boostmobile.com/support/faq/account-management/port-out-faqs" target="_blank" class="link-btn" title="View Boost Mobile Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Must call support at 1-888-266-7848 to get the 9-digit account number.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>The 4-digit security PIN set up when account was created.</p></div>
                <div class="meta"><h4>SPID</h4><p>5555 (AT&T) / 6755 (Dish)</p></div>
              </div>
              <div class="tips"><h4>Notes</h4><p class="small">You may need to speak to a support agent to get the correct information.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Boost Mobile')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="consumer-cellular" class="card">
          <details>
            <summary>
              <h3>Consumer Cellular</h3>
              <a href="https://www.consumercellular.com/help/account-settings/requesting-a-port-out-pin" target="_blank" class="link-btn" title="View Consumer Cellular Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>9-digit number from online profile or call (888) 750-5519.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Available online or by calling (888) 750-5519.</p></div>
                <div class="meta"><h4>SPID</h4><p>5555 (AT&T) / 7777 (T-Mobile)</p></div>
              </div>
              <div class="tips"><h4>Tips</h4><p class="small">Often requires last 4 of SSN for verification. May need Tier 2 support for holds.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Consumer Cellular')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="visible" class="card">
          <details>
            <summary>
              <h3>Visible</h3>
              <a href="https://www.visible.com/help/port-out-info" target="_blank" class="link-btn" title="View Visible Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Found in Visible app under "Profile" > "Port-Out PIN."</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Request in app/website. Sent via email/text, valid for 7 days.</p></div>
                <div class="meta"><h4>SPID</h4><p>6666</p></div>
              </div>
              <div class="tips"><h4>Notes</h4><p class="small">The port-out PIN is time-sensitive; use the most recent one received.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Visible')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="metro" class="card">
          <details>
            <summary>
              <h3>Metro by T-Mobile</h3>
              <a href="https://www.metrobyt-mobile.com/support/how-to/transfer-your-phone-number" target="_blank" class="link-btn" title="View Metro by T-Mobile Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>9-digit number from online account or billing statements.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Request in "My Account" > "Profile". Sent via text, valid for 7 days.</p></div>
                <div class="meta"><h4>SPID</h4><p>7777</p></div>
              </div>
              <div class="tips"><h4>Notes</h4><p class="small">8-digit security PIN (often MMDDYYYY) may be needed for verification.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Metro by T-Mobile')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="us-cellular" class="card">
          <details>
            <summary>
              <h3>US Cellular</h3>
              <a href="https://www.uscellular.com/help/port-out" target="_blank" class="link-btn" title="View US Cellular Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Displayed in top-left corner of online account page.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Commonly the last 4 digits of the phone number being ported.</p></div>
                <div class="meta"><h4>SPID</h4><p>6528</p></div>
              </div>
              <div class="tips"><h4>Notes</h4><p class="small">For issues, contact customer service at 1-888-944-9400.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('US Cellular')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>
        
        <section id="spectrum-mobile" class="card">
          <details>
            <summary>
              <h3>Spectrum Mobile</h3>
              <a href="https://www.spectrum.net/support/mobile/transferring-your-number" target="_blank" class="link-btn" title="View Spectrum Mobile Port-Out Info">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                Official Page
              </a>
            </summary>
            <div>
              <div class="meta-grid">
                <div class="meta"><h4>Account Number</h4><p>Listed on billing statement or in online account.</p></div>
                <div class="meta"><h4>Transfer PIN</h4><p>Must call Spectrum support at 833-224-6603 to request.</p></div>
                <div class="meta"><h4>SPID</h4><p>6666</p></div>
              </div>
              <div class="tips"><h4>Notes</h4><p class="small">You will need to contact Spectrum support for any specific porting details or issues.</p></div>
              <div style="margin-top: 10px;">
                <button class="copy-btn" onclick="elaborate('Spectrum Mobile')">Elaborate on this</button>
              </div>
            </div>
          </details>
        </section>

        <section id="data-transfer" class="card">
          <details>
            <summary>
              <h3>Data Transfer Guide</h3>
            </summary>
            <div>
                <div class="accordion">
                  <details>
                    <summary>Transferring from Android to Android</summary>
                    <div>
                      <p class="small">For most Android devices, the recommended method is to use Google's built-in data transfer utility. During the setup process of a new Android device, it will prompt you to transfer data from your old device. You can choose to use a cable for a faster, more stable transfer or connect wirelessly via Bluetooth or Wi-Fi. Apps, contacts, photos, and settings will all be transferred. Samsung devices also have their own application called Samsung Smart Switch which is a very reliable option for transferring data from any device to a Samsung device.</p>
                    </div>
                  </details>
                  <details>
                    <summary>Transferring from Android to iPhone</summary>
                    <div>
                      <p class="small">For this transfer, you must use the "Move to iOS" app. This app is available on the Google Play Store and is designed to transfer your contacts, message history, camera photos and videos, web bookmarks, mail accounts, and calendars from your Android phone to a new iPhone. You must start this process during the initial setup of the new iPhone. If the iPhone has already been set up, you will need to factory reset it to access this feature.</p>
                    </div>
                  </details>
                  <details>
                    <summary>Transferring from iPhone to iPhone</summary>
                    <div>
                      <p class="small">The best way to transfer from an old iPhone to a new one is by using the "Quick Start" feature. By placing your new iPhone near your old iPhone, the new device will detect it and guide you through a wireless data transfer. You can also restore your new iPhone from an iCloud or iTunes backup. If the new phone requires an update during the transfer, it's best to skip the transfer, complete the update, factory reset the device again, and then retry the data transfer for the most stable result.</p>
                    </div>
                  </details>
                </div>
            </div>
          </details>
        </section>

        <section id="tech-support" class="card">
            <h3>AI Tech Support &amp; Troubleshooting</h3>
            <p class="small">Use the AI search bar below to ask specific troubleshooting questions. For example, "Why is my T-Mobile number port being rejected?" or "What should I do if a customer forgot their account PIN?" The AI will provide detailed, step-by-step guidance.</p>
            <div style="margin-top: 10px;" id="techSupportContainer">
                <div class="search-container">
                    <input id="techSupportInput" type="search" placeholder="Ask a tech support question..." aria-label="Ask a tech support question" />
                    <button id="techSupportBtn" class="copy-btn">Search</button>
                    <button id="clearTechSupportBtn" title="Clear Tech Support Search" style="background:transparent;border:0;color:var(--muted);font-weight:600;cursor:pointer">Clear</button>
                </div>
                <div class="ai-result" id="techSupportResult" style="display: none;"></div>
            </div>
        </section>

        <p class="small">Notes: This page was generated from the "Porting Playbook NER" presentation. If you'd like any carrier reordered, sections added/removed, or a printable version, I can update it.</p>
      </div>
    </main>
  </div>

  <script>
    // Constants for API calls
    const MODEL_NAME = 'gemini-2.5-flash-preview-05-20';
    const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=`;
    const API_KEY = ""; // This will be provided by the runtime environment

    const originalSections = Array.from(document.querySelectorAll('section.card'));
    const filterInput = document.getElementById('filterInput');
    const clearBtn = document.getElementById('clearBtn');
    const aiSearchInput = document.getElementById('aiSearchInput');
    const aiSearchBtn = document.getElementById('aiSearchBtn');
    const clearAiBtn = document.getElementById('clearAiBtn');
    const aiResultDiv = document.getElementById('aiResult');
    const techSupportInput = document.getElementById('techSupportInput');
    const techSupportBtn = document.getElementById('techSupportBtn');
    const clearTechSupportBtn = document.getElementById('clearTechSupportBtn');
    const techSupportResultDiv = document.getElementById('techSupportResult');
    const sortBtn = document.getElementById('sortAZ');
    const contentContainer = document.getElementById('content');
    
    let isFetching = false;
    let retries = 0;
    const maxRetries = 3;
    const retryDelay = 1000;
    let isSorted = false;

    /**
     * Highlights text matches within a given DOM node.
     * @param {HTMLElement} node The node to search within.
     * @param {string} term The search term to highlight.
     */
    function highlightText(node, term){
      if(!term) return;
      const re = new RegExp(term.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'), 'ig');
      node.querySelectorAll('mark').forEach(m=>m.replaceWith(m.textContent));
      node.childNodes.forEach(child=>{
        if(child.nodeType===3){
          const match = child.textContent.match(re);
          if(match){
            const span = document.createElement('span');
            span.innerHTML = child.textContent.replace(re, m=>`<mark>${m}</mark>`);
            child.replaceWith(span);
          }
        } else if(child.nodeType===1){
          highlightText(child, term);
        }
      });
    }
    
    /**
     * Filters the displayed content based on the search input.
     */
    function runFilter(){
      const q = filterInput.value.trim().toLowerCase();
      let any = false;
      
      const currentSections = Array.from(contentContainer.querySelectorAll('section.card'));
      
      currentSections.forEach(s=>{
        // For non-carrier sections, check if any of their content matches the query
        if (s.id === 'data-transfer' || s.id === 'tech-support' || s.id === 'ai-disclaimer') {
          const match = q === '' || s.innerText.toLowerCase().includes(q);
          s.style.display = match ? 'block' : 'none';
          if (match) any = true;
          s.querySelectorAll('mark').forEach(m => m.replaceWith(m.textContent));
          if (q) {
            highlightText(s, q);
          }
          return;
        }

        // For carrier sections, check if the content of the details tag matches
        const detailsContent = s.querySelector('details')?.innerText || '';
        const match = q === '' || detailsContent.toLowerCase().includes(q);
        s.style.display = match ? 'block' : 'none';
        if (match) any = true;
        
        s.querySelectorAll('mark').forEach(m => m.replaceWith(m.textContent));
        if (q) {
          highlightText(s, q);
        }
      });
      if(!any){
        if(!document.querySelector('.search-empty')){
          const n = document.createElement('div');
          n.className='search-empty';
          n.innerText = 'No results â€” try another keyword.';
          document.getElementById('content').appendChild(n);
        }
      } else {
        const se = document.querySelector('.search-empty'); if(se) se.remove();
      }
    }

    /**
     * Performs a search using the Gemini API.
     * @param {string} prompt The prompt for the AI.
     * @param {HTMLElement} resultDiv The div to display the results.
     */
    async function runAISearch(prompt, resultDiv) {
      if (isFetching) return;

      isFetching = true;
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = `<div class="loading">Please wait one moment for search to process...</div>`;
      retries = 0;

      const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
      const payload = { contents: chatHistory };
      const apiUrlWithKey = `${API_URL}${API_KEY}`;


      async function attemptFetch() {
        try {
          const response = await fetch(apiUrlWithKey, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });

          if (!response.ok) {
            if (response.status === 429 && retries < maxRetries) {
              const delay = retryDelay * Math.pow(2, retries);
              retries++;
              await new Promise(res => setTimeout(res, delay));
              return attemptFetch();
            }
            throw new Error(`API call failed with status: ${response.status}`);
          }

          const result = await response.json();
          const text = result?.candidates?.[0]?.content?.parts?.[0]?.text || "No information found for this carrier.";

          // Replace Markdown with HTML for better visual scanning
          let formattedText = text.trim();
          // Bolding for headers like **Account Number:**
          formattedText = formattedText.replace(/\*\*(.*?):\*\*/g, '<h4 class="text-md font-bold mt-3 mb-1 text-purple-600">$1</h4>');
          // Bullet points
          formattedText = formattedText.replace(/^\s*[-*]\s+(.*)$/gm, '<ul><li class="list-disc ml-5">$1</li></ul>');
          // Consolidate adjacent ULs
          formattedText = formattedText.replace(/<\/ul>\s*<ul>/g, '');
          
          resultDiv.innerHTML = `
            <h4>AI Search Result</h4>
            <div class="ai-result-content">${formattedText}</div>
          `;
          
        } catch (error) {
          resultDiv.innerHTML = `<h4>Error</h4><p>An error occurred. Please try again later. Details: ${error.message}</p>`;
        } finally {
          isFetching = false;
        }
      }
      attemptFetch();
    }
    
    /**
     * Handles the "Elaborate on this" button click by generating a moderately detailed, scannable guide.
     * @param {string} carrierName The name of the carrier to elaborate on.
     */
    window.elaborate = function(carrierName) {
      const prompt = `As an AI assistant for an Xfinity Mobile employee, provide a moderately detailed, scannable guide for porting a number from ${carrierName}. The employee needs this to help a customer port their number IN to Xfinity Mobile. Format the response for easy visual scanning. Use the following structure:

**Account Number:**
- Provide clear, step-by-step instructions on where the customer can find this.

**Transfer PIN:**
- Provide clear, step-by-step instructions on how the customer can get this. Mention any expiration details.

**Troubleshooting & Key Tips:**
- List 2-3 common issues or important tips for a smooth port from this carrier.

**Support Number:**
- Provide the primary customer support phone number for ${carrierName}.

Do not include any welcoming or closing remarks. Only provide the information in this exact format.`;
      runAISearch(prompt, aiResultDiv);
      aiSearchInput.value = '';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    };

    filterInput.addEventListener('input', runFilter);
    clearBtn.addEventListener('click', ()=>{filterInput.value='';filterInput.focus();runFilter();});

    aiSearchBtn.addEventListener('click', () => {
        const query = aiSearchInput.value.trim();
        if (query) {
            const prompt = `As an AI assistant for an Xfinity Mobile employee, provide a moderately detailed, scannable guide for porting a number from "${query}". The employee needs this to help a customer port their number IN to Xfinity Mobile. Format the response for easy visual scanning. Use the following structure:

**Account Number:**
- Provide clear, step-by-step instructions on where the customer can find this.

**Transfer PIN:**
- Provide clear, step-by-step instructions on how the customer can get this. Mention any expiration details.

**Troubleshooting & Key Tips:**
- List 2-3 common issues or important tips for a smooth port from this carrier.

**Support Number:**
- Provide the primary customer support phone number for "${query}".

If you cannot find specific information for "${query}", state that clearly. Do not include any welcoming or closing remarks.`;
            runAISearch(prompt, aiResultDiv);
        } else {
            aiResultDiv.style.display = 'none';
        }
    });
    
    aiSearchInput.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        aiSearchBtn.click();
      }
    });

    clearAiBtn.addEventListener('click', ()=>{
      aiSearchInput.value = '';
      aiResultDiv.style.display = 'none';
    });
    
    techSupportBtn.addEventListener('click', () => {
        const query = techSupportInput.value.trim();
        if (query) {
            const prompt = `As a technical support expert for an Xfinity Mobile employee, provide concise and easy to read technical support and troubleshooting steps for the following porting-out scenario: "${query}". Be specific and provide clear, actionable advice to help an employee resolve the issue with a customer. Use bullet points for steps. Do not include any information on porting IN.`;
            runAISearch(prompt, techSupportResultDiv);
        } else {
            techSupportResultDiv.style.display = 'none';
        }
    });

    techSupportInput.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        techSupportBtn.click();
      }
    });

    clearTechSupportBtn.addEventListener('click', ()=>{
      techSupportInput.value = '';
      techSupportResultDiv.style.display = 'none';
    });

    document.getElementById('expandAll').addEventListener('click', ()=>{
      document.querySelectorAll('details').forEach(d=>d.open=true);
    });
    document.getElementById('collapseAll').addEventListener('click', ()=>{
      document.querySelectorAll('details').forEach(d=>d.open=false);
    });

    // New sort functionality
    sortBtn.addEventListener('click', () => {
        const carrierSections = Array.from(contentContainer.querySelectorAll('section.card')).filter(s => !['data-transfer', 'tech-support', 'ai-disclaimer'].includes(s.id));
        const nonCarrierSections = Array.from(contentContainer.querySelectorAll('section.card')).filter(s => ['data-transfer', 'tech-support', 'ai-disclaimer'].includes(s.id));

        if (isSorted) {
            // Revert to original order
            contentContainer.innerHTML = '';
            originalSections.forEach(s => contentContainer.appendChild(s));
            isSorted = false;
        } else {
            // Sort alphabetically
            carrierSections.sort((a, b) => {
                const textA = a.querySelector('h3').innerText.toUpperCase();
                const textB = b.querySelector('h3').innerText.toUpperCase();
                return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;
            });
            contentContainer.innerHTML = '';
            // Add disclaimer first
            const disclaimer = originalSections.find(s => s.id === 'ai-disclaimer');
            if(disclaimer) contentContainer.appendChild(disclaimer);

            carrierSections.forEach(s => contentContainer.appendChild(s));
            
            // Add other non-carrier sections at the end
            nonCarrierSections.forEach(s => {
                if(s.id !== 'ai-disclaimer') contentContainer.appendChild(s)
            });
            isSorted = true;
        }
    });

    document.addEventListener('keydown', e=>{
      if(e.key==='/' && document.activeElement!==filterInput && document.activeElement!==aiSearchInput){ e.preventDefault(); filterInput.focus(); }
    });

    if('scrollBehavior' in document.documentElement.style){
      history.scrollRestoration = 'manual';
    }
  </script>
</body>
</html>
